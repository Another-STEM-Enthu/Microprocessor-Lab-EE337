C51 COMPILER V9.60.7.0   EVENTCOUNT                                                        03/12/2023 23:49:39 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE EVENTCOUNT
OBJECT MODULE PLACED IN .\Objects\EventCount.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE EventCount.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listing
                    -s\EventCount.lst) TABS(2) OBJECT(.\Objects\EventCount.obj)

line level    source

   1          #include <at89c5131.h>
   2          #include "lcd.h"
   3          
   4          sbit inpin=P3^4;
   5          sbit outpin=P3^6;
   6          
   7          void timer1_isr () interrupt 3
   8          {
   9   1         outpin = ~outpin;
  10   1         TF1 = 0;
  11   1         TH1 = 0x0BE;
  12   1         TL1 = 0x0E5;
  13   1         TR1 = 1;
  14   1         //Reload values for TH1 and TL1. Start timer 1.  
  15   1      }
  16          
  17          
  18          //Main function
  19          void main(void)
  20          { 
  21   1        int i = 0;
  22   1        int k = 0;
  23   1        unsigned int min = 0;
  24   1        unsigned int sec = 0;
  25   1        int showit[4] = {0,0,0,0};
  26   1          
  27   1        P1_0 = 1;
  28   1        lcd_init();
  29   1        msdelay(4);
  30   1        
  31   1        TMOD = 0x15; //mode 1 timer 0 and for timer 1
  32   1        TH1 = 0x0BE;  //Values for Timer 1 TH1
  33   1        TL1 = 0x0E5;  //Values for Timer 1 TL1
  34   1        
  35   1        TH0 = 0x00;  //Values for Timer 0 TH0
  36   1        TL0 = 0x00;  //Values for Timer 0 TL0
  37   1        EA = 1;  //activate global interrupts
  38   1        ET1 = 1; //activate interrupts for timer 1
  39   1        TR1 = 1;
  40   1        
  41   1        while(1){
  42   2          if(P1_0 == 1){
  43   3            TR0 = 1;
  44   3            goto outt;
  45   3          }
  46   2        }
  47   1      
  48   1        outt: while(1){
  49   2          if(P1_0 == 0){
  50   3            TR0 = 0;
  51   3            goto display;
  52   3          }
  53   2        }
  54   1        display: sec = (TH0*256 + TL0)/(10*6); 
C51 COMPILER V9.60.7.0   EVENTCOUNT                                                        03/12/2023 23:49:39 PAGE 2   

  55   1        min = sec / 60;
  56   1        sec = sec % 60;
  57   1        i = sec;
  58   1        while(i>0){
  59   2        showit[k]=i%10;
  60   2        i=i/10;
  61   2        k++;
  62   2        }
  63   1        
  64   1        if(k == 1){
  65   2          k++;
  66   2        }
  67   1        
  68   1        i = min;
  69   1        while(i>0){
  70   2        showit[k]=i%10;
  71   2        i=i/10;
  72   2        k++;
  73   2        } 
  74   1        
  75   1        k--;
  76   1        for (i=3;i>=2;i--){
  77   2          lcd_write_char(showit[i] + 48);
  78   2          msdelay(10);
  79   2        }
  80   1        lcd_write_char(':');
  81   1        for (i=1;i>=0;i--){
  82   2          lcd_write_char(showit[i] + 48);
  83   2          msdelay(10);
  84   2        }
  85   1        
  86   1        while(1);
  87   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    546    ----
   CONSTANT SIZE    =      8    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      19
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
